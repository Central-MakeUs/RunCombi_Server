<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" th:href="@{/admin/css/common.css}" />
    <link rel="stylesheet" th:href="@{/admin/css/announcement.css}" />
    <title>공지 관리</title>
</head>
<body>
<!-- 공통 네비게이션 바 호출 -->
<div th:insert="admin/fragments/navbar :: navbar"></div>
    <main class="content">
        <h1>공지 관리</h1>
        <div class="box">
            <p class="announcement-description">공지 관리 페이지입니다.</p>
            <div class="detail-box">
                <button type="button" class="toggle-btn add-announcement section-toggle-btn">공지사항 · 이벤트 추가</button>
                <div class="form-section hidden-section">
                    <form id="announcementForm" class="announcement-form" onsubmit="return submitForm();">
                        <!-- 공지/이벤트 선택 -->
                        <div class="option-group">
                            <label>공지 종류</label><br>
                            <label>
                                <input type="radio" name="type" value="NOTICE" checked /> 공지사항
                            </label>
                            <label>
                                <input type="radio" name="type" value="EVENT" /> 이벤트
                            </label>
                        </div>
                        <div class="option-group">
                            <label>노출 여부</label><br>
                            <label>
                                <input type="radio" name="display" value="Y" checked /> 노출
                            </label>
                            <label>
                                <input type="radio" name="display" value="N" /> 미노출
                            </label>
                        </div>
                        <!-- 공통으로 보여줄 항목 -->
                        <div class="form-group common-group">
                            <label>제목</label>
                            <input type="text" id="title" name="title" required />
                        </div>
                        <div class="form-group common-group">
                            <label>내용</label>
                            <textarea id="content" name="content" rows="5" required></textarea>
                        </div>

                        <!-- 이벤트 전용 항목들 (처음에는 숨김) -->
                        <div class="form-group event-group">
                            <label>시작일</label>
                            <input type="date" id="startDate" name="startDate" />
                        </div>
                        <div class="form-group event-group">
                            <label>종료일</label>
                            <input type="date" id="endDate" name="endDate" />
                        </div>
                        <div class="form-group common-group">
                            <label>공지사항 · 이벤트 이미지 URL</label>
                            <input type="text" id="announcementImageUrl" name="announcementImageUrl" />
                        </div>
                        <div class="form-group event-group">
                            <label>이벤트 참여 URL</label>
                            <input type="text" id="eventApplyUrl" name="eventApplyUrl" />
                        </div>

                        <button type="submit">저장</button>
                    </form>
                </div>
            </div>
            <div class="detail-box">
                <button type="button" class="toggle-btn delete-announcement section-toggle-btn">공지사항 · 이벤트 수정, 삭제</button>
                <div class="event-list-section hidden-section">
                    <table border="1" cellpadding="10">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>TYPE</th>
                            <th>제목</th>
                            <th>작성일</th>
                            <th>수정</th>
                            <th>삭제</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="announcement : ${announcementList}">
                            <td th:text="${announcement.announcementId}">ID</td>
                            <td th:text="${announcement.announcementType}">TYPE</td>
                            <td th:text="${announcement.title}">제목</td>
                            <td th:text="${#strings.substring(announcement.regDate, 0, 10)}">등록일</td>
                            <td>
                                <button onclick="updateAnnouncement(this)">수정</button>
                            </td>
                            <td>
                                <button onclick="deleteAnnouncement(this)">삭제</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--<div class="detail-box">추가 항목</div>-->
        </div>
    </main>

    <script th:src="@{/admin/js/common.js}"></script>
    <script th:src="@{/admin/js/announcement.js}"></script>
</body>
</html>
